{"ast":null,"code":"import { DateUtils } from '../../../libs/utils';\nimport Locale from '../../locale';\nvar t = Locale.t;\nvar weeks = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\nvar months = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'];\nDateUtils.i18n = {\n  dayNamesShort: weeks.map(function (week) {\n    return t('el.datepicker.weeks.' + week);\n  }),\n  dayNames: weeks.map(function (week) {\n    return t('el.datepicker.weeks.' + week);\n  }),\n  monthNamesShort: months.map(function (month) {\n    return t('el.datepicker.months.' + month);\n  }),\n  monthNames: months.map(function (month, index) {\n    return t('el.datepicker.month' + (index + 1));\n  })\n};\n\nvar newArray = function newArray(start, end) {\n  var result = [];\n\n  for (var i = start; i <= end; i++) {\n    result.push(i);\n  }\n\n  return result;\n};\n\nexport var equalDate = function equalDate(dateA, dateB) {\n  return dateA === dateB || new Date(dateA).getTime() === new Date(dateB).getTime();\n};\nexport var toDate = function toDate(date) {\n  return isDate(date) ? new Date(date) : null;\n};\nexport var isDate = function isDate(date) {\n  if (date === null || date === undefined) return false;\n  if (isNaN(new Date(date).getTime())) return false;\n  return true;\n};\nexport var formatDate = function formatDate(date, format) {\n  date = toDate(date);\n  if (!date) return '';\n  return DateUtils.format(date, format || 'yyyy-MM-dd');\n};\nexport var parseDate = function parseDate(string, format) {\n  return DateUtils.parse(string, format || 'yyyy-MM-dd');\n};\nexport var getDayCountOfMonth = function getDayCountOfMonth(year, month) {\n  if (month === 3 || month === 5 || month === 8 || month === 10) {\n    return 30;\n  }\n\n  if (month === 1) {\n    if (year % 4 === 0 && year % 100 !== 0 || year % 400 === 0) {\n      return 29;\n    } else {\n      return 28;\n    }\n  }\n\n  return 31;\n};\nexport var getFirstDayOfMonth = function getFirstDayOfMonth(date) {\n  var temp = new Date(date.getTime());\n  temp.setDate(1);\n  return temp.getDay();\n};\nexport var DAY_DURATION = 86400000; // return date corresponding to the first cell on datetable \n\nexport var getStartDateOfMonth = function getStartDateOfMonth(year, month) {\n  var offsetWeek = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var result = new Date(year, month, 1);\n  var day = result.getDay();\n\n  if (day === offsetWeek) {\n    result.setTime(result.getTime() - DAY_DURATION * 7);\n  } else {\n    var offset = getOffsetToWeekOrigin(day, offsetWeek);\n    result.setTime(result.getTime() - DAY_DURATION * offset);\n  }\n\n  return result;\n};\n/**\n * \n * @export\n * @param {any} day , first day of current month, 0 - 6\n * @param {number} [offsetWeek=0, 0-6, 0 sunday, 6 saturday] \n * @returns \n */\n\nexport function getOffsetToWeekOrigin(day) {\n  var offsetWeek = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var offset = day >= offsetWeek ? day - offsetWeek : 7 + day - offsetWeek;\n  offset = offset === 0 ? 7 : offset; // if the two days collide, we force 7 days padding\n\n  return offset;\n}\nexport var getWeekNumber = function getWeekNumber(src) {\n  var date = new Date(src.getTime());\n  date.setHours(0, 0, 0, 0); // Thursday in current week decides the year.\n\n  date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7); // January 4 is always in week 1.\n\n  var week1 = new Date(date.getFullYear(), 0, 4); // Adjust to Thursday in week 1 and count number of weeks from date to week 1.\n\n  return 1 + Math.round(((date.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);\n}; // http://stackoverflow.com/questions/16590500/javascript-calculate-date-from-week-number\n\nexport function getDateOfISOWeek(w, y) {\n  var simple = new Date(y, 0, 1 + (w - 1) * 7);\n  var dow = simple.getDay();\n  var ISOweekStart = simple;\n  if (dow <= 4) ISOweekStart.setDate(simple.getDate() - simple.getDay() + 1);else ISOweekStart.setDate(simple.getDate() + 8 - simple.getDay());\n  return ISOweekStart;\n}\nexport var prevMonth = function prevMonth(src) {\n  var year = src.getFullYear();\n  var month = src.getMonth();\n  var date = src.getDate();\n  var newYear = month === 0 ? year - 1 : year;\n  var newMonth = month === 0 ? 11 : month - 1;\n  var newMonthDayCount = getDayCountOfMonth(newYear, newMonth);\n\n  if (newMonthDayCount < date) {\n    src.setDate(newMonthDayCount);\n  }\n\n  src.setMonth(newMonth);\n  src.setFullYear(newYear);\n  return new Date(src.getTime());\n};\nexport var nextMonth = function nextMonth(src) {\n  var clone = new Date(src.getTime());\n  var year = clone.getFullYear();\n  var month = clone.getMonth();\n  var date = clone.getDate();\n  var newYear = month === 11 ? year + 1 : year;\n  var newMonth = month === 11 ? 0 : month + 1;\n  var newMonthDayCount = getDayCountOfMonth(newYear, newMonth);\n\n  if (newMonthDayCount < date) {\n    clone.setDate(newMonthDayCount);\n  }\n\n  clone.setMonth(newMonth);\n  clone.setFullYear(newYear);\n  return clone;\n};\nexport var getRangeHours = function getRangeHours(ranges) {\n  var hours = [];\n  var disabledHours = [];\n  (ranges || []).forEach(function (range) {\n    var value = range.map(function (date) {\n      return date.getHours();\n    });\n    disabledHours = disabledHours.concat(newArray(value[0], value[1]));\n  });\n\n  if (disabledHours.length) {\n    for (var i = 0; i < 24; i++) {\n      hours[i] = disabledHours.indexOf(i) === -1;\n    }\n  } else {\n    for (var _i = 0; _i < 24; _i++) {\n      hours[_i] = false;\n    }\n  }\n\n  return hours;\n};\nexport var limitRange = function limitRange(date, ranges) {\n  var format = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'yyyy-MM-dd HH:mm:ss';\n  if (!ranges || !ranges.length) return date;\n  var len = ranges.length;\n  date = DateUtils.parse(DateUtils.format(date, format), format);\n\n  for (var i = 0; i < len; i++) {\n    var range = ranges[i];\n\n    if (date >= range[0] && date <= range[1]) {\n      return date;\n    }\n  }\n\n  var maxDate = ranges[0][0];\n  var minDate = ranges[0][0];\n  ranges.forEach(function (range) {\n    minDate = new Date(Math.min(range[0], minDate));\n    maxDate = new Date(Math.max(range[1], maxDate));\n  });\n  return date < minDate ? minDate : maxDate;\n};\nexport function hasClass(target, classname) {\n  return target.classList.contains(classname);\n}\nexport var SELECTION_MODES = {\n  YEAR: 'year',\n  MONTH: 'month',\n  WEEK: 'week',\n  DAY: 'day',\n  RANGE: 'range'\n};\nexport function deconstructDate(date) {\n  return {\n    year: date.getFullYear(),\n    month: date.getMonth(),\n    week: getWeekNumber(date)\n  };\n}","map":null,"metadata":{},"sourceType":"module"}