{"ast":null,"code":"import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nvar ANIMATION_DURATION = 300;\n\nvar CollapseTransition = function (_Component) {\n  _inherits(CollapseTransition, _Component);\n\n  function CollapseTransition() {\n    _classCallCheck(this, CollapseTransition);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  CollapseTransition.prototype.componentDidMount = function componentDidMount() {\n    this.beforeEnter();\n\n    if (this.props.isShow) {\n      this.enter();\n    }\n  };\n\n  CollapseTransition.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.beforeLeave();\n    this.leave();\n  };\n\n  CollapseTransition.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (this.props.isShow !== nextProps.isShow) this.triggerChange(nextProps.isShow);\n  };\n\n  CollapseTransition.prototype.triggerChange = function triggerChange(isShow) {\n    clearTimeout(this.enterTimer);\n    clearTimeout(this.leaveTimer);\n\n    if (isShow) {\n      this.beforeEnter();\n      this.enter();\n    } else {\n      this.beforeLeave();\n      this.leave();\n    }\n  };\n\n  CollapseTransition.prototype.beforeEnter = function beforeEnter() {\n    var el = this.selfRef; //prepare\n\n    el.dataset.oldPaddingTop = el.style.paddingTop;\n    el.dataset.oldPaddingBottom = el.style.paddingBottom;\n    el.dataset.oldOverflow = el.style.overflow;\n    el.style.height = '0';\n    el.style.paddingTop = 0;\n    el.style.paddingBottom = 0;\n  };\n\n  CollapseTransition.prototype.enter = function enter() {\n    var _this2 = this;\n\n    var el = this.selfRef; //start\n\n    el.style.display = 'block';\n\n    if (el.scrollHeight !== 0) {\n      el.style.height = el.scrollHeight + 'px';\n      el.style.paddingTop = el.dataset.oldPaddingTop;\n      el.style.paddingBottom = el.dataset.oldPaddingBottom;\n    } else {\n      el.style.height = '';\n      el.style.paddingTop = el.dataset.oldPaddingTop;\n      el.style.paddingBottom = el.dataset.oldPaddingBottom;\n    }\n\n    el.style.overflow = 'hidden';\n    this.enterTimer = setTimeout(function () {\n      return _this2.afterEnter();\n    }, ANIMATION_DURATION);\n  };\n\n  CollapseTransition.prototype.afterEnter = function afterEnter() {\n    var el = this.selfRef;\n    el.style.display = 'block';\n    el.style.height = '';\n    el.style.overflow = el.dataset.oldOverflow;\n  };\n\n  CollapseTransition.prototype.beforeLeave = function beforeLeave() {\n    var el = this.selfRef;\n    el.dataset.oldPaddingTop = el.style.paddingTop;\n    el.dataset.oldPaddingBottom = el.style.paddingBottom;\n    el.dataset.oldOverflow = el.style.overflow;\n    el.style.display = 'block';\n\n    if (el.scrollHeight !== 0) {\n      el.style.height = el.scrollHeight + 'px';\n    }\n\n    el.style.overflow = 'hidden';\n  };\n\n  CollapseTransition.prototype.leave = function leave() {\n    var _this3 = this;\n\n    var el = this.selfRef;\n\n    if (el.scrollHeight !== 0) {\n      el.style.height = 0;\n      el.style.paddingTop = 0;\n      el.style.paddingBottom = 0;\n    }\n\n    this.leaveTimer = setTimeout(function () {\n      return _this3.afterLeave();\n    }, ANIMATION_DURATION);\n  };\n\n  CollapseTransition.prototype.afterLeave = function afterLeave() {\n    var el = this.selfRef;\n    if (!el) return;\n    el.style.display = 'none';\n    el.style.height = '';\n    el.style.overflow = el.dataset.oldOverflow;\n    el.style.paddingTop = el.dataset.oldPaddingTop;\n    el.style.paddingBottom = el.dataset.oldPaddingBottom;\n  };\n\n  CollapseTransition.prototype.render = function render() {\n    var _this4 = this;\n\n    return React.createElement('div', {\n      className: 'collapse-transition',\n      style: {\n        overflow: 'hidden'\n      },\n      ref: function ref(e) {\n        return _this4.selfRef = e;\n      }\n    }, this.props.children);\n  };\n\n  return CollapseTransition;\n}(Component);\n\nexport default CollapseTransition;","map":null,"metadata":{},"sourceType":"module"}